<?xml version='1.0' encoding="UTF-8"?>

<robot name="transportation" xmlns:xacro="http://www.ros.org/wiki/xacro">

<xacro:property name="wheel_height" value="-0.05"/>
<xacro:property name="wheel_length" value="0.05"/>
<xacro:property name="wheel_offset" value="0.11"/>
<xacro:property name="chassis_width" value="0.2"/>
<xacro:property name="chassis_length" value="0.4"/>

<!--Shape Macros=======================================-->
<!--Wheel-->
<xacro:macro name="wheel" params="name">
<link name="${name}">
    <visual>
      <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
      <geometry>
        <cylinder radius="0.1" length="${wheel_length}"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 0"/>
      </material>
    </visual>
  </link>
</xacro:macro>

<!--Joint Macros========================================-->
<!--Wheel Joint-->
<xacro:macro name="wheel_Joint" params="name parent child z_pos mirror">
  <joint type="continuous" name="${name}_axle">
    <origin  xyz="${z_pos} ${((chassis_width/2)+wheel_length)*mirror} ${wheel_height}" rpy="0 0 0"/>
    <child link="${child}"/>
    <parent link="${parent}"/>
    <axis xyz="0 1 0" rpy="0 0 0"/>
  </joint>
</xacro:macro>


<!--Robot Definition====================================-->
<link name='chassis'>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="${chassis_length} ${chassis_width} .15"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 0"/>
      </material>
    </visual>
  </link>

  <xacro:wheel name="front_left" />
  <xacro:wheel name="front_right" />
  <xacro:wheel name="back_left" />
  <xacro:wheel name="back_right" />

  <xacro:wheel_Joint name="front_left" parent="chassis" child="front_left" z_pos="${wheel_offset}" mirror="1"/>
  <xacro:wheel_Joint name="front_right" parent="chassis" child="front_right" z_pos="${wheel_offset}" mirror="-1"/>
  <xacro:wheel_Joint name="back_left" parent="chassis" child="back_left" z_pos="${wheel_offset*-1}" mirror="1"/>
  <xacro:wheel_Joint name="back_right" parent="chassis" child="back_right" z_pos="${wheel_offset*-1}" mirror="-1"/>
</robot>